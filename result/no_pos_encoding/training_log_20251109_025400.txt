
============================================================
训练开始时间: 2025-11-09 02:54:00
============================================================

==================================================
运行名称: no_pos_encoding
加载数据...
加载训练数据...
训练数据量: 206112，限制为: 200000
训练集大小: 200000
构建词汇表...
源语言词汇表大小: 20000
目标语言词汇表大小: 20000
加载验证数据...
验证集大小: 888
==================================================
创建模型...
模型参数统计:
  可训练参数: 74,880,544
  总参数: 74,880,544
  模型大小: 285.65 MB
==================================================
开始训练...

==================================================
Epoch 1/50
==================================================

Step 0: Loss=9.9269, PPL=20474.36, LR=6.18e-08

Step 100: Loss=9.3945, PPL=12022.04, LR=6.24e-06

Step 200: Loss=8.7592, PPL=6369.22, LR=1.24e-05

Step 300: Loss=7.9553, PPL=2850.55, LR=1.86e-05

Step 400: Loss=7.1107, PPL=1225.01, LR=2.48e-05

Step 500: Loss=6.6483, PPL=771.44, LR=3.09e-05

Step 600: Loss=6.1874, PPL=486.59, LR=3.71e-05

Step 700: Loss=6.0916, PPL=442.12, LR=4.33e-05

Step 800: Loss=6.0164, PPL=410.08, LR=4.95e-05

Step 900: Loss=5.9536, PPL=385.15, LR=5.56e-05

Step 1000: Loss=5.8391, PPL=343.45, LR=6.18e-05

Step 1100: Loss=5.7840, PPL=325.06, LR=6.80e-05

Step 1200: Loss=5.7316, PPL=308.47, LR=7.42e-05

Step 1300: Loss=5.6371, PPL=280.65, LR=8.04e-05

Step 1400: Loss=5.5836, PPL=266.03, LR=8.65e-05

Step 1500: Loss=5.4625, PPL=235.68, LR=9.27e-05

Step 1600: Loss=5.4529, PPL=233.43, LR=9.89e-05

Step 1700: Loss=5.3742, PPL=215.76, LR=1.05e-04

Step 1800: Loss=5.5288, PPL=251.84, LR=1.11e-04

Step 1900: Loss=5.4326, PPL=228.75, LR=1.17e-04

Step 2000: Loss=5.2083, PPL=182.79, LR=1.24e-04

Step 2100: Loss=5.3937, PPL=220.02, LR=1.30e-04

Step 2200: Loss=5.2610, PPL=192.67, LR=1.36e-04

Step 2300: Loss=5.1378, PPL=170.35, LR=1.42e-04

Step 2400: Loss=5.2373, PPL=188.17, LR=1.48e-04

Step 2500: Loss=5.1439, PPL=171.38, LR=1.54e-04

Step 2600: Loss=4.9369, PPL=139.34, LR=1.61e-04

Step 2700: Loss=4.9689, PPL=143.87, LR=1.67e-04

Step 2800: Loss=5.0371, PPL=154.02, LR=1.73e-04

Step 2900: Loss=4.9659, PPL=143.43, LR=1.79e-04

Step 3000: Loss=5.0059, PPL=149.29, LR=1.85e-04

Step 3100: Loss=4.8218, PPL=124.19, LR=1.92e-04

Epoch 1 结果:
  训练损失: 5.9066, 困惑度: 367.44
  验证损失: 4.8391, 困惑度: 126.35
检查点已保存: runs/no_pos_encoding/checkpoints/best_model.pt
  ✓ 保存最佳模型 (验证损失: 4.8391)

==================================================
Epoch 2/50
==================================================

Step 0: Loss=4.8703, PPL=130.37, LR=1.93e-04

Step 100: Loss=4.7037, PPL=110.35, LR=1.99e-04

Step 200: Loss=4.8869, PPL=132.54, LR=2.05e-04

Step 300: Loss=4.6175, PPL=101.24, LR=2.12e-04

Step 400: Loss=4.7972, PPL=121.18, LR=2.18e-04

Step 500: Loss=4.9068, PPL=135.20, LR=2.24e-04

Step 600: Loss=4.7003, PPL=109.98, LR=2.30e-04

Step 700: Loss=4.7150, PPL=111.61, LR=2.36e-04

Step 800: Loss=4.5708, PPL=96.62, LR=2.42e-04

Step 900: Loss=4.6420, PPL=103.76, LR=2.49e-04

Step 1000: Loss=4.7079, PPL=110.82, LR=2.55e-04

Step 1100: Loss=4.6893, PPL=108.78, LR=2.61e-04

Step 1200: Loss=4.6180, PPL=101.29, LR=2.67e-04

Step 1300: Loss=4.4032, PPL=81.71, LR=2.73e-04

Step 1400: Loss=4.6568, PPL=105.30, LR=2.80e-04

Step 1500: Loss=4.4851, PPL=88.69, LR=2.86e-04

Step 1600: Loss=4.4438, PPL=85.10, LR=2.92e-04

Step 1700: Loss=4.3265, PPL=75.68, LR=2.98e-04

Step 1800: Loss=4.4047, PPL=81.83, LR=3.04e-04

Step 1900: Loss=4.6338, PPL=102.90, LR=3.10e-04

Step 2000: Loss=4.3385, PPL=76.59, LR=3.17e-04

Step 2100: Loss=4.4673, PPL=87.12, LR=3.23e-04

Step 2200: Loss=4.3455, PPL=77.13, LR=3.29e-04

Step 2300: Loss=4.3143, PPL=74.76, LR=3.35e-04

Step 2400: Loss=4.4872, PPL=88.87, LR=3.41e-04

Step 2500: Loss=4.3685, PPL=78.93, LR=3.47e-04

Step 2600: Loss=4.2731, PPL=71.75, LR=3.54e-04

Step 2700: Loss=4.2064, PPL=67.12, LR=3.60e-04

Step 2800: Loss=4.1900, PPL=66.03, LR=3.66e-04

Step 2900: Loss=4.4173, PPL=82.87, LR=3.72e-04

Step 3000: Loss=4.3886, PPL=80.53, LR=3.78e-04

Step 3100: Loss=4.1390, PPL=62.74, LR=3.85e-04

Epoch 2 结果:
  训练损失: 4.5015, 困惑度: 90.15
  验证损失: 4.1672, 困惑度: 64.54
检查点已保存: runs/no_pos_encoding/checkpoints/best_model.pt
  ✓ 保存最佳模型 (验证损失: 4.1672)

==================================================
Epoch 3/50
==================================================

Step 0: Loss=3.9631, PPL=52.62, LR=3.86e-04

Step 100: Loss=4.2378, PPL=69.25, LR=3.92e-04

Step 200: Loss=3.8948, PPL=49.15, LR=3.98e-04

Step 300: Loss=4.2558, PPL=70.51, LR=4.05e-04

Step 400: Loss=4.3272, PPL=75.73, LR=4.11e-04

Step 500: Loss=4.0485, PPL=57.31, LR=4.17e-04

Step 600: Loss=3.9981, PPL=54.50, LR=4.23e-04

Step 700: Loss=4.2080, PPL=67.22, LR=4.29e-04

Step 800: Loss=4.2533, PPL=70.34, LR=4.35e-04

Step 900: Loss=4.2019, PPL=66.81, LR=4.42e-04

Step 1000: Loss=4.0636, PPL=58.18, LR=4.48e-04

Step 1100: Loss=3.9005, PPL=49.43, LR=4.54e-04

Step 1200: Loss=4.0635, PPL=58.18, LR=4.60e-04

Step 1300: Loss=3.9883, PPL=53.96, LR=4.66e-04

Step 1400: Loss=4.1096, PPL=60.92, LR=4.73e-04

Step 1500: Loss=3.9318, PPL=51.00, LR=4.79e-04

Step 1600: Loss=4.0593, PPL=57.93, LR=4.85e-04

Step 1700: Loss=4.1043, PPL=60.60, LR=4.91e-04

Step 1800: Loss=3.8389, PPL=46.47, LR=4.93e-04

Step 1900: Loss=3.9460, PPL=51.73, LR=4.90e-04

Step 2000: Loss=3.9648, PPL=52.71, LR=4.87e-04

Step 2100: Loss=4.0090, PPL=55.09, LR=4.84e-04

Step 2200: Loss=4.1138, PPL=61.18, LR=4.81e-04

Step 2300: Loss=3.9033, PPL=49.56, LR=4.78e-04

Step 2400: Loss=4.0805, PPL=59.17, LR=4.75e-04

Step 2500: Loss=3.7936, PPL=44.41, LR=4.72e-04

Step 2600: Loss=3.8158, PPL=45.41, LR=4.70e-04

Step 2700: Loss=4.1857, PPL=65.74, LR=4.67e-04

Step 2800: Loss=3.9437, PPL=51.61, LR=4.65e-04

Step 2900: Loss=3.8648, PPL=47.69, LR=4.62e-04

Step 3000: Loss=3.9216, PPL=50.48, LR=4.59e-04

Step 3100: Loss=3.8293, PPL=46.03, LR=4.57e-04

Epoch 3 结果:
  训练损失: 4.0310, 困惑度: 56.32
  验证损失: 3.8326, 困惑度: 46.18
  验证BLEU: 0.0029 (0.29%)
检查点已保存: runs/no_pos_encoding/checkpoints/best_model.pt
  ✓ 保存最佳模型 (验证损失: 3.8326)

==================================================
Epoch 4/50
==================================================

Step 0: Loss=3.7364, PPL=41.94, LR=4.56e-04

Step 100: Loss=3.7003, PPL=40.46, LR=4.54e-04

Step 200: Loss=3.8078, PPL=45.05, LR=4.52e-04

Step 300: Loss=3.9830, PPL=53.68, LR=4.49e-04

Step 400: Loss=3.6942, PPL=40.21, LR=4.47e-04

Step 500: Loss=3.6508, PPL=38.50, LR=4.45e-04

Step 600: Loss=3.8867, PPL=48.75, LR=4.42e-04

Step 700: Loss=3.5545, PPL=34.97, LR=4.40e-04

Step 800: Loss=3.9076, PPL=49.78, LR=4.38e-04

Step 900: Loss=3.9716, PPL=53.07, LR=4.36e-04

Step 1000: Loss=3.7000, PPL=40.45, LR=4.34e-04

Step 1100: Loss=3.5644, PPL=35.32, LR=4.32e-04

Step 1200: Loss=3.7510, PPL=42.56, LR=4.30e-04

Step 1300: Loss=3.6628, PPL=38.97, LR=4.28e-04

Step 1400: Loss=3.6802, PPL=39.65, LR=4.26e-04

Step 1500: Loss=3.6791, PPL=39.61, LR=4.24e-04

Step 1600: Loss=3.7675, PPL=43.27, LR=4.22e-04

Step 1700: Loss=3.7316, PPL=41.75, LR=4.20e-04

Step 1800: Loss=3.7948, PPL=44.47, LR=4.18e-04

Step 1900: Loss=3.5455, PPL=34.66, LR=4.16e-04

Step 2000: Loss=3.5283, PPL=34.07, LR=4.14e-04

Step 2100: Loss=3.8426, PPL=46.65, LR=4.13e-04

Step 2200: Loss=3.6566, PPL=38.73, LR=4.11e-04

Step 2300: Loss=3.6783, PPL=39.58, LR=4.09e-04

Step 2400: Loss=3.8363, PPL=46.35, LR=4.07e-04

Step 2500: Loss=3.7842, PPL=44.00, LR=4.06e-04

Step 2600: Loss=3.7715, PPL=43.45, LR=4.04e-04

Step 2700: Loss=3.5987, PPL=36.55, LR=4.02e-04

Step 2800: Loss=3.6890, PPL=40.00, LR=4.01e-04

Step 2900: Loss=3.5955, PPL=36.43, LR=3.99e-04

Step 3000: Loss=3.7043, PPL=40.62, LR=3.97e-04

Step 3100: Loss=3.4325, PPL=30.95, LR=3.96e-04

Epoch 4 结果:
  训练损失: 3.7077, 困惑度: 40.76
  验证损失: 3.6176, 困惑度: 37.25
检查点已保存: runs/no_pos_encoding/checkpoints/best_model.pt
  ✓ 保存最佳模型 (验证损失: 3.6176)

==================================================
Epoch 5/50
==================================================

Step 0: Loss=3.5109, PPL=33.48, LR=3.95e-04

Step 100: Loss=3.5067, PPL=33.34, LR=3.94e-04

Step 200: Loss=3.4990, PPL=33.08, LR=3.92e-04

Step 300: Loss=3.3658, PPL=28.96, LR=3.91e-04

Step 400: Loss=3.4775, PPL=32.38, LR=3.89e-04

Step 500: Loss=3.6136, PPL=37.10, LR=3.88e-04

Step 600: Loss=3.2980, PPL=27.06, LR=3.86e-04

Step 700: Loss=3.2984, PPL=27.07, LR=3.85e-04

Step 800: Loss=3.4377, PPL=31.11, LR=3.83e-04

Step 900: Loss=3.4102, PPL=30.27, LR=3.82e-04

Step 1000: Loss=3.5962, PPL=36.46, LR=3.80e-04

Step 1100: Loss=3.7196, PPL=41.25, LR=3.79e-04

Step 1200: Loss=3.1894, PPL=24.27, LR=3.78e-04

Step 1300: Loss=3.5445, PPL=34.62, LR=3.76e-04

Step 1400: Loss=3.5663, PPL=35.38, LR=3.75e-04

Step 1500: Loss=3.4444, PPL=31.32, LR=3.73e-04

Step 1600: Loss=3.8130, PPL=45.29, LR=3.72e-04

Step 1700: Loss=3.4839, PPL=32.59, LR=3.71e-04

Step 1800: Loss=3.3979, PPL=29.90, LR=3.70e-04

Step 1900: Loss=3.3526, PPL=28.58, LR=3.68e-04

Step 2000: Loss=3.5984, PPL=36.54, LR=3.67e-04

Step 2100: Loss=3.4177, PPL=30.50, LR=3.66e-04

Step 2200: Loss=3.5820, PPL=35.95, LR=3.64e-04

Step 2300: Loss=3.3617, PPL=28.84, LR=3.63e-04

Step 2400: Loss=3.4636, PPL=31.93, LR=3.62e-04

Step 2500: Loss=3.5332, PPL=34.23, LR=3.61e-04

Step 2600: Loss=3.5249, PPL=33.95, LR=3.60e-04

Step 2700: Loss=3.3788, PPL=29.33, LR=3.58e-04

Step 2800: Loss=3.5328, PPL=34.22, LR=3.57e-04

Step 2900: Loss=3.4947, PPL=32.94, LR=3.56e-04

Step 3000: Loss=3.4736, PPL=32.25, LR=3.55e-04

Step 3100: Loss=3.6603, PPL=38.87, LR=3.54e-04

Epoch 5 结果:
  训练损失: 3.4797, 困惑度: 32.45
  验证损失: 3.4970, 困惑度: 33.02
检查点已保存: runs/no_pos_encoding/checkpoints/best_model.pt
  ✓ 保存最佳模型 (验证损失: 3.4970)
检查点已保存: runs/no_pos_encoding/checkpoints/checkpoint_epoch_5.pt
训练曲线已保存: runs/no_pos_encoding/figures/training_curves.png

==================================================
Epoch 6/50
==================================================

Step 0: Loss=3.4209, PPL=30.60, LR=3.54e-04

Step 100: Loss=2.9803, PPL=19.69, LR=3.52e-04

Step 200: Loss=3.2723, PPL=26.37, LR=3.51e-04

Step 300: Loss=3.3907, PPL=29.69, LR=3.50e-04

Step 400: Loss=3.3270, PPL=27.85, LR=3.49e-04

Step 500: Loss=3.2260, PPL=25.18, LR=3.48e-04

Step 600: Loss=3.1089, PPL=22.40, LR=3.47e-04

Step 700: Loss=3.3705, PPL=29.09, LR=3.46e-04

Step 800: Loss=3.2418, PPL=25.58, LR=3.45e-04

Step 900: Loss=3.4434, PPL=31.29, LR=3.44e-04

Step 1000: Loss=3.4029, PPL=30.05, LR=3.43e-04

Step 1100: Loss=3.4673, PPL=32.05, LR=3.42e-04

Step 1200: Loss=3.2607, PPL=26.07, LR=3.41e-04

Step 1300: Loss=3.1501, PPL=23.34, LR=3.40e-04

Step 1400: Loss=3.4097, PPL=30.26, LR=3.39e-04

Step 1500: Loss=3.3292, PPL=27.92, LR=3.38e-04

Step 1600: Loss=3.1958, PPL=24.43, LR=3.37e-04

Step 1700: Loss=3.3572, PPL=28.71, LR=3.36e-04

Step 1800: Loss=3.3142, PPL=27.50, LR=3.35e-04

Step 1900: Loss=3.3261, PPL=27.83, LR=3.34e-04

Step 2000: Loss=3.3600, PPL=28.79, LR=3.33e-04

Step 2100: Loss=3.4097, PPL=30.26, LR=3.32e-04

Step 2200: Loss=3.1980, PPL=24.48, LR=3.31e-04

Step 2300: Loss=3.3979, PPL=29.90, LR=3.30e-04

Step 2400: Loss=3.4272, PPL=30.79, LR=3.29e-04

Step 2500: Loss=3.3764, PPL=29.26, LR=3.28e-04

Step 2600: Loss=3.2297, PPL=25.27, LR=3.27e-04

Step 2700: Loss=3.3277, PPL=27.87, LR=3.26e-04

Step 2800: Loss=3.2895, PPL=26.83, LR=3.26e-04

Step 2900: Loss=3.4270, PPL=30.78, LR=3.25e-04

Step 3000: Loss=3.4647, PPL=31.97, LR=3.24e-04

Step 3100: Loss=3.4611, PPL=31.85, LR=3.23e-04

Epoch 6 结果:
  训练损失: 3.3164, 困惑度: 27.56
  验证损失: 3.4215, 困惑度: 30.61
  验证BLEU: 0.0055 (0.55%)
检查点已保存: runs/no_pos_encoding/checkpoints/best_model.pt
  ✓ 保存最佳模型 (验证损失: 3.4215)

==================================================
Epoch 7/50
==================================================

Step 0: Loss=2.9410, PPL=18.93, LR=3.23e-04

Step 100: Loss=3.0040, PPL=20.17, LR=3.22e-04

Step 200: Loss=3.1290, PPL=22.85, LR=3.21e-04

Step 300: Loss=3.0550, PPL=21.22, LR=3.20e-04

Step 400: Loss=3.1938, PPL=24.38, LR=3.19e-04

Step 500: Loss=3.0475, PPL=21.06, LR=3.19e-04

Step 600: Loss=2.9898, PPL=19.88, LR=3.18e-04

Step 700: Loss=3.1529, PPL=23.40, LR=3.17e-04

Step 800: Loss=3.2380, PPL=25.48, LR=3.16e-04

Step 900: Loss=2.8335, PPL=17.00, LR=3.15e-04

Step 1000: Loss=3.1878, PPL=24.23, LR=3.14e-04

Step 1100: Loss=3.0227, PPL=20.55, LR=3.14e-04

Step 1200: Loss=3.0258, PPL=20.61, LR=3.13e-04

Step 1300: Loss=3.3191, PPL=27.63, LR=3.12e-04

Step 1400: Loss=2.9104, PPL=18.36, LR=3.11e-04

Step 1500: Loss=3.1547, PPL=23.45, LR=3.11e-04

Step 1600: Loss=3.1769, PPL=23.97, LR=3.10e-04

Step 1700: Loss=3.4233, PPL=30.67, LR=3.09e-04

Step 1800: Loss=3.1866, PPL=24.21, LR=3.08e-04

Step 1900: Loss=3.3045, PPL=27.23, LR=3.08e-04

Step 2000: Loss=3.4700, PPL=32.14, LR=3.07e-04

Step 2100: Loss=3.1773, PPL=23.98, LR=3.06e-04

Step 2200: Loss=3.2928, PPL=26.92, LR=3.05e-04

Step 2300: Loss=3.1242, PPL=22.74, LR=3.05e-04

Step 2400: Loss=3.1205, PPL=22.66, LR=3.04e-04

Step 2500: Loss=3.0597, PPL=21.32, LR=3.03e-04

Step 2600: Loss=3.2888, PPL=26.81, LR=3.02e-04

Step 2700: Loss=3.2366, PPL=25.45, LR=3.02e-04

Step 2800: Loss=3.1548, PPL=23.45, LR=3.01e-04

Step 2900: Loss=3.2505, PPL=25.80, LR=3.00e-04

Step 3000: Loss=3.4975, PPL=33.03, LR=3.00e-04

Step 3100: Loss=3.2173, PPL=24.96, LR=2.99e-04

Epoch 7 结果:
  训练损失: 3.1871, 困惑度: 24.22
  验证损失: 3.3730, 困惑度: 29.17
检查点已保存: runs/no_pos_encoding/checkpoints/best_model.pt
  ✓ 保存最佳模型 (验证损失: 3.3730)

==================================================
Epoch 8/50
==================================================

Step 0: Loss=3.0210, PPL=20.51, LR=2.99e-04

Step 100: Loss=3.1915, PPL=24.33, LR=2.98e-04

Step 200: Loss=2.9534, PPL=19.17, LR=2.97e-04

Step 300: Loss=2.9371, PPL=18.86, LR=2.97e-04

Step 400: Loss=2.9738, PPL=19.57, LR=2.96e-04

Step 500: Loss=3.0428, PPL=20.96, LR=2.95e-04

Step 600: Loss=3.0214, PPL=20.52, LR=2.95e-04

Step 700: Loss=3.2196, PPL=25.02, LR=2.94e-04

Step 800: Loss=3.0280, PPL=20.66, LR=2.93e-04

Step 900: Loss=3.0671, PPL=21.48, LR=2.93e-04

Step 1000: Loss=3.0339, PPL=20.78, LR=2.92e-04

Step 1100: Loss=3.1834, PPL=24.13, LR=2.92e-04

Step 1200: Loss=2.9490, PPL=19.09, LR=2.91e-04

Step 1300: Loss=3.0949, PPL=22.08, LR=2.90e-04

Step 1400: Loss=3.1467, PPL=23.26, LR=2.90e-04

Step 1500: Loss=3.2043, PPL=24.64, LR=2.89e-04

Step 1600: Loss=2.8585, PPL=17.43, LR=2.88e-04

Step 1700: Loss=3.2106, PPL=24.79, LR=2.88e-04

Step 1800: Loss=2.9945, PPL=19.98, LR=2.87e-04

Step 1900: Loss=3.0196, PPL=20.48, LR=2.87e-04

Step 2000: Loss=3.1335, PPL=22.96, LR=2.86e-04

Step 2100: Loss=3.0675, PPL=21.49, LR=2.85e-04

Step 2200: Loss=3.2068, PPL=24.70, LR=2.85e-04

Step 2300: Loss=3.0947, PPL=22.08, LR=2.84e-04

Step 2400: Loss=3.3253, PPL=27.81, LR=2.84e-04

Step 2500: Loss=3.1783, PPL=24.01, LR=2.83e-04

Step 2600: Loss=3.2280, PPL=25.23, LR=2.82e-04

Step 2700: Loss=3.1412, PPL=23.13, LR=2.82e-04

Step 2800: Loss=2.9864, PPL=19.81, LR=2.81e-04

Step 2900: Loss=3.0944, PPL=22.07, LR=2.81e-04

Step 3000: Loss=3.1936, PPL=24.37, LR=2.80e-04

Step 3100: Loss=3.1750, PPL=23.93, LR=2.80e-04

Epoch 8 结果:
  训练损失: 3.0807, 困惑度: 21.77
  验证损失: 3.3315, 困惑度: 27.98
检查点已保存: runs/no_pos_encoding/checkpoints/best_model.pt
  ✓ 保存最佳模型 (验证损失: 3.3315)

==================================================
Epoch 9/50
==================================================

Step 0: Loss=2.8739, PPL=17.71, LR=2.80e-04

Step 100: Loss=2.7146, PPL=15.10, LR=2.79e-04

Step 200: Loss=2.8687, PPL=17.61, LR=2.78e-04

Step 300: Loss=3.0376, PPL=20.86, LR=2.78e-04

Step 400: Loss=2.7489, PPL=15.63, LR=2.77e-04

Step 500: Loss=2.7930, PPL=16.33, LR=2.77e-04

Step 600: Loss=2.9537, PPL=19.18, LR=2.76e-04

Step 700: Loss=2.8104, PPL=16.62, LR=2.76e-04

Step 800: Loss=2.7970, PPL=16.39, LR=2.75e-04

Step 900: Loss=2.8783, PPL=17.78, LR=2.75e-04

Step 1000: Loss=2.9310, PPL=18.75, LR=2.74e-04

Step 1100: Loss=2.9839, PPL=19.76, LR=2.74e-04

Step 1200: Loss=2.9487, PPL=19.08, LR=2.73e-04

Step 1300: Loss=2.8262, PPL=16.88, LR=2.73e-04

Step 1400: Loss=3.0145, PPL=20.38, LR=2.72e-04

Step 1500: Loss=2.8258, PPL=16.87, LR=2.71e-04

Step 1600: Loss=3.1202, PPL=22.65, LR=2.71e-04

Step 1700: Loss=3.0249, PPL=20.59, LR=2.70e-04

Step 1800: Loss=3.0714, PPL=21.57, LR=2.70e-04

Step 1900: Loss=3.0170, PPL=20.43, LR=2.69e-04

Step 2000: Loss=2.9015, PPL=18.20, LR=2.69e-04

Step 2100: Loss=2.9209, PPL=18.56, LR=2.68e-04

Step 2200: Loss=2.9378, PPL=18.87, LR=2.68e-04

Step 2300: Loss=3.2310, PPL=25.31, LR=2.67e-04

Step 2400: Loss=3.2308, PPL=25.30, LR=2.67e-04

Step 2500: Loss=2.9839, PPL=19.76, LR=2.66e-04

Step 2600: Loss=3.1430, PPL=23.17, LR=2.66e-04

Step 2700: Loss=3.1499, PPL=23.33, LR=2.66e-04

Step 2800: Loss=3.0372, PPL=20.85, LR=2.65e-04

Step 2900: Loss=3.0296, PPL=20.69, LR=2.65e-04

Step 3000: Loss=2.8436, PPL=17.18, LR=2.64e-04

Step 3100: Loss=3.1633, PPL=23.65, LR=2.64e-04

Epoch 9 结果:
  训练损失: 2.9889, 困惑度: 19.86
  验证损失: 3.3118, 困惑度: 27.43
  验证BLEU: 0.0079 (0.79%)
检查点已保存: runs/no_pos_encoding/checkpoints/best_model.pt
  ✓ 保存最佳模型 (验证损失: 3.3118)

==================================================
Epoch 10/50
==================================================

Step 0: Loss=2.8310, PPL=16.96, LR=2.64e-04

Step 100: Loss=2.7216, PPL=15.20, LR=2.63e-04

Step 200: Loss=2.7544, PPL=15.71, LR=2.63e-04

Step 300: Loss=2.6778, PPL=14.55, LR=2.62e-04

Step 400: Loss=2.8137, PPL=16.67, LR=2.62e-04

Step 500: Loss=2.7315, PPL=15.36, LR=2.61e-04

Step 600: Loss=2.8198, PPL=16.77, LR=2.61e-04

Step 700: Loss=2.8960, PPL=18.10, LR=2.60e-04

Step 800: Loss=2.9198, PPL=18.54, LR=2.60e-04

Step 900: Loss=2.7583, PPL=15.77, LR=2.59e-04

Step 1000: Loss=3.0137, PPL=20.36, LR=2.59e-04

Step 1100: Loss=2.8764, PPL=17.75, LR=2.59e-04

Step 1200: Loss=2.6827, PPL=14.62, LR=2.58e-04

Step 1300: Loss=2.7799, PPL=16.12, LR=2.58e-04

Step 1400: Loss=2.9281, PPL=18.69, LR=2.57e-04

Step 1500: Loss=2.9613, PPL=19.32, LR=2.57e-04

Step 1600: Loss=2.9198, PPL=18.54, LR=2.56e-04

Step 1700: Loss=2.9360, PPL=18.84, LR=2.56e-04

Step 1800: Loss=2.7469, PPL=15.59, LR=2.55e-04

Step 1900: Loss=2.7103, PPL=15.03, LR=2.55e-04

Step 2000: Loss=3.1780, PPL=24.00, LR=2.55e-04

Step 2100: Loss=3.1793, PPL=24.03, LR=2.54e-04

Step 2200: Loss=2.9809, PPL=19.70, LR=2.54e-04

Step 2300: Loss=2.9472, PPL=19.05, LR=2.53e-04

Step 2400: Loss=3.0567, PPL=21.26, LR=2.53e-04

Step 2500: Loss=2.9568, PPL=19.24, LR=2.53e-04

Step 2600: Loss=2.7923, PPL=16.32, LR=2.52e-04

Step 2700: Loss=3.2334, PPL=25.37, LR=2.52e-04

Step 2800: Loss=2.6956, PPL=14.81, LR=2.51e-04

Step 2900: Loss=2.8832, PPL=17.87, LR=2.51e-04

Step 3000: Loss=3.0874, PPL=21.92, LR=2.50e-04

Step 3100: Loss=3.2958, PPL=27.00, LR=2.50e-04

Epoch 10 结果:
  训练损失: 2.9090, 困惑度: 18.34
  验证损失: 3.3060, 困惑度: 27.28
检查点已保存: runs/no_pos_encoding/checkpoints/best_model.pt
  ✓ 保存最佳模型 (验证损失: 3.3060)
检查点已保存: runs/no_pos_encoding/checkpoints/checkpoint_epoch_10.pt
训练曲线已保存: runs/no_pos_encoding/figures/training_curves.png

==================================================
Epoch 11/50
==================================================

Step 0: Loss=2.8353, PPL=17.04, LR=2.50e-04

Step 100: Loss=2.5007, PPL=12.19, LR=2.50e-04

Step 200: Loss=2.8418, PPL=17.15, LR=2.49e-04

Step 300: Loss=2.5551, PPL=12.87, LR=2.49e-04

Step 400: Loss=2.8469, PPL=17.23, LR=2.48e-04

Step 500: Loss=2.8902, PPL=18.00, LR=2.48e-04

Step 600: Loss=2.7769, PPL=16.07, LR=2.48e-04

Step 700: Loss=2.8965, PPL=18.11, LR=2.47e-04

Step 800: Loss=2.7936, PPL=16.34, LR=2.47e-04

Step 900: Loss=2.9092, PPL=18.34, LR=2.46e-04

Step 1000: Loss=2.8405, PPL=17.12, LR=2.46e-04

Step 1100: Loss=2.7228, PPL=15.22, LR=2.46e-04

Step 1200: Loss=3.0474, PPL=21.06, LR=2.45e-04

Step 1300: Loss=3.1020, PPL=22.24, LR=2.45e-04

Step 1400: Loss=2.7014, PPL=14.90, LR=2.45e-04

Step 1500: Loss=2.7929, PPL=16.33, LR=2.44e-04

Step 1600: Loss=2.7171, PPL=15.14, LR=2.44e-04

Step 1700: Loss=2.8592, PPL=17.45, LR=2.43e-04

Step 1800: Loss=2.9491, PPL=19.09, LR=2.43e-04

Step 1900: Loss=2.8918, PPL=18.03, LR=2.43e-04

Step 2000: Loss=3.0020, PPL=20.13, LR=2.42e-04

Step 2100: Loss=2.8105, PPL=16.62, LR=2.42e-04

Step 2200: Loss=3.0020, PPL=20.12, LR=2.42e-04

Step 2300: Loss=2.8993, PPL=18.16, LR=2.41e-04

Step 2400: Loss=2.8850, PPL=17.90, LR=2.41e-04

Step 2500: Loss=3.1002, PPL=22.20, LR=2.41e-04

Step 2600: Loss=2.7091, PPL=15.02, LR=2.40e-04

Step 2700: Loss=2.7357, PPL=15.42, LR=2.40e-04

Step 2800: Loss=2.9944, PPL=19.97, LR=2.39e-04

Step 2900: Loss=2.9751, PPL=19.59, LR=2.39e-04

Step 3000: Loss=2.9340, PPL=18.80, LR=2.39e-04

Step 3100: Loss=2.8758, PPL=17.74, LR=2.38e-04

Epoch 11 结果:
  训练损失: 2.8386, 困惑度: 17.09
  验证损失: 3.2953, 困惑度: 26.98
检查点已保存: runs/no_pos_encoding/checkpoints/best_model.pt
  ✓ 保存最佳模型 (验证损失: 3.2953)

==================================================
Epoch 12/50
==================================================

Step 0: Loss=2.8007, PPL=16.46, LR=2.38e-04

Step 100: Loss=2.4094, PPL=11.13, LR=2.38e-04

Step 200: Loss=2.8066, PPL=16.55, LR=2.38e-04

Step 300: Loss=2.5333, PPL=12.60, LR=2.37e-04

Step 400: Loss=2.6589, PPL=14.28, LR=2.37e-04

Step 500: Loss=2.6464, PPL=14.10, LR=2.37e-04

Step 600: Loss=2.7633, PPL=15.85, LR=2.36e-04

Step 700: Loss=2.6872, PPL=14.69, LR=2.36e-04

Step 800: Loss=2.7217, PPL=15.21, LR=2.36e-04

Step 900: Loss=2.7294, PPL=15.32, LR=2.35e-04

Step 1000: Loss=2.7101, PPL=15.03, LR=2.35e-04

Step 1100: Loss=2.7465, PPL=15.59, LR=2.35e-04

Step 1200: Loss=2.8459, PPL=17.22, LR=2.34e-04

Step 1300: Loss=2.6224, PPL=13.77, LR=2.34e-04

Step 1400: Loss=2.7535, PPL=15.70, LR=2.34e-04

Step 1500: Loss=3.0633, PPL=21.40, LR=2.33e-04

Step 1600: Loss=2.7539, PPL=15.70, LR=2.33e-04

Step 1700: Loss=2.7212, PPL=15.20, LR=2.33e-04

Step 1800: Loss=2.7067, PPL=14.98, LR=2.32e-04

Step 1900: Loss=2.7638, PPL=15.86, LR=2.32e-04

Step 2000: Loss=2.7993, PPL=16.43, LR=2.32e-04

Step 2100: Loss=2.8384, PPL=17.09, LR=2.31e-04

Step 2200: Loss=2.7748, PPL=16.04, LR=2.31e-04

Step 2300: Loss=2.6761, PPL=14.53, LR=2.31e-04

Step 2400: Loss=2.6360, PPL=13.96, LR=2.30e-04

Step 2500: Loss=2.9403, PPL=18.92, LR=2.30e-04

Step 2600: Loss=2.9210, PPL=18.56, LR=2.30e-04

Step 2700: Loss=2.8881, PPL=17.96, LR=2.30e-04

Step 2800: Loss=3.0704, PPL=21.55, LR=2.29e-04

Step 2900: Loss=2.7788, PPL=16.10, LR=2.29e-04

Step 3000: Loss=2.9706, PPL=19.50, LR=2.29e-04

Step 3100: Loss=2.8867, PPL=17.93, LR=2.28e-04

Epoch 12 结果:
  训练损失: 2.7749, 困惑度: 16.04
  验证损失: 3.2928, 困惑度: 26.92
  验证BLEU: 0.0069 (0.69%)
检查点已保存: runs/no_pos_encoding/checkpoints/best_model.pt
  ✓ 保存最佳模型 (验证损失: 3.2928)

==================================================
Epoch 13/50
==================================================

Step 0: Loss=2.6587, PPL=14.28, LR=2.28e-04

Step 100: Loss=2.6891, PPL=14.72, LR=2.28e-04

Step 200: Loss=2.5455, PPL=12.75, LR=2.28e-04

Step 300: Loss=2.5286, PPL=12.54, LR=2.27e-04

Step 400: Loss=2.6730, PPL=14.48, LR=2.27e-04

Step 500: Loss=2.4206, PPL=11.25, LR=2.27e-04

Step 600: Loss=2.7069, PPL=14.98, LR=2.26e-04

Step 700: Loss=2.7167, PPL=15.13, LR=2.26e-04

Step 800: Loss=2.6098, PPL=13.60, LR=2.26e-04

Step 900: Loss=2.6751, PPL=14.51, LR=2.26e-04

Step 1000: Loss=2.7739, PPL=16.02, LR=2.25e-04

Step 1100: Loss=2.7356, PPL=15.42, LR=2.25e-04

Step 1200: Loss=2.5065, PPL=12.26, LR=2.25e-04

Step 1300: Loss=2.6614, PPL=14.32, LR=2.24e-04

Step 1400: Loss=2.8185, PPL=16.75, LR=2.24e-04

Step 1500: Loss=2.7654, PPL=15.89, LR=2.24e-04

Step 1600: Loss=2.6266, PPL=13.83, LR=2.23e-04

Step 1700: Loss=2.6836, PPL=14.64, LR=2.23e-04

Step 1800: Loss=2.6175, PPL=13.70, LR=2.23e-04

Step 1900: Loss=2.6539, PPL=14.21, LR=2.23e-04

Step 2000: Loss=2.8693, PPL=17.63, LR=2.22e-04

Step 2100: Loss=2.5949, PPL=13.40, LR=2.22e-04

Step 2200: Loss=2.7464, PPL=15.59, LR=2.22e-04

Step 2300: Loss=2.6922, PPL=14.76, LR=2.22e-04

Step 2400: Loss=2.8253, PPL=16.87, LR=2.21e-04

Step 2500: Loss=2.9811, PPL=19.71, LR=2.21e-04

Step 2600: Loss=2.7205, PPL=15.19, LR=2.21e-04

Step 2700: Loss=2.7433, PPL=15.54, LR=2.20e-04

Step 2800: Loss=2.8300, PPL=16.95, LR=2.20e-04

Step 2900: Loss=2.7954, PPL=16.37, LR=2.20e-04

Step 3000: Loss=2.8444, PPL=17.19, LR=2.20e-04

Step 3100: Loss=2.9636, PPL=19.37, LR=2.19e-04

Epoch 13 结果:
  训练损失: 2.7191, 困惑度: 15.17
  验证损失: 3.2979, 困惑度: 27.06
  验证损失未改善 (patience: 1/5)
  当前: 3.2979, 最佳: 3.2928, 差距: 0.0051

==================================================
Epoch 14/50
==================================================

Step 0: Loss=2.6614, PPL=14.32, LR=2.19e-04

Step 100: Loss=2.5533, PPL=12.85, LR=2.19e-04

Step 200: Loss=2.5061, PPL=12.26, LR=2.19e-04

Step 300: Loss=2.5366, PPL=12.64, LR=2.18e-04

Step 400: Loss=2.5345, PPL=12.61, LR=2.18e-04

Step 500: Loss=2.5669, PPL=13.03, LR=2.18e-04

Step 600: Loss=2.4465, PPL=11.55, LR=2.18e-04

Step 700: Loss=2.5412, PPL=12.69, LR=2.17e-04

Step 800: Loss=2.6883, PPL=14.71, LR=2.17e-04

Step 900: Loss=2.5725, PPL=13.10, LR=2.17e-04

Step 1000: Loss=2.7160, PPL=15.12, LR=2.17e-04

Step 1100: Loss=2.6143, PPL=13.66, LR=2.16e-04

Step 1200: Loss=2.6159, PPL=13.68, LR=2.16e-04

Step 1300: Loss=2.7572, PPL=15.76, LR=2.16e-04

Step 1400: Loss=2.5976, PPL=13.43, LR=2.16e-04

Step 1500: Loss=2.6651, PPL=14.37, LR=2.15e-04

Step 1600: Loss=2.7071, PPL=14.99, LR=2.15e-04

Step 1700: Loss=2.7500, PPL=15.64, LR=2.15e-04

Step 1800: Loss=2.5816, PPL=13.22, LR=2.15e-04

Step 1900: Loss=2.6184, PPL=13.71, LR=2.14e-04

Step 2000: Loss=2.6168, PPL=13.69, LR=2.14e-04

Step 2100: Loss=2.5027, PPL=12.22, LR=2.14e-04

Step 2200: Loss=2.6582, PPL=14.27, LR=2.14e-04

Step 2300: Loss=2.7710, PPL=15.97, LR=2.13e-04

Step 2400: Loss=2.7689, PPL=15.94, LR=2.13e-04

Step 2500: Loss=2.5754, PPL=13.14, LR=2.13e-04

Step 2600: Loss=2.8838, PPL=17.88, LR=2.13e-04

Step 2700: Loss=2.9499, PPL=19.10, LR=2.12e-04

Step 2800: Loss=2.5865, PPL=13.28, LR=2.12e-04

Step 2900: Loss=2.5286, PPL=12.54, LR=2.12e-04

Step 3000: Loss=2.7389, PPL=15.47, LR=2.12e-04

Step 3100: Loss=2.6838, PPL=14.64, LR=2.11e-04

Epoch 14 结果:
  训练损失: 2.6658, 困惑度: 14.38
  验证损失: 3.2994, 困惑度: 27.10
  验证损失未改善 (patience: 2/5)
  当前: 3.2994, 最佳: 3.2928, 差距: 0.0065

==================================================
Epoch 15/50
==================================================

Step 0: Loss=2.4950, PPL=12.12, LR=2.11e-04

Step 100: Loss=2.6154, PPL=13.67, LR=2.11e-04

Step 200: Loss=2.5914, PPL=13.35, LR=2.11e-04

Step 300: Loss=2.6049, PPL=13.53, LR=2.11e-04

Step 400: Loss=2.5265, PPL=12.51, LR=2.10e-04

Step 500: Loss=2.3064, PPL=10.04, LR=2.10e-04

Step 600: Loss=2.3877, PPL=10.89, LR=2.10e-04

Step 700: Loss=2.5851, PPL=13.26, LR=2.10e-04

Step 800: Loss=2.7144, PPL=15.10, LR=2.09e-04

Step 900: Loss=2.4862, PPL=12.02, LR=2.09e-04

Step 1000: Loss=2.7709, PPL=15.97, LR=2.09e-04

Step 1100: Loss=2.3948, PPL=10.97, LR=2.09e-04

Step 1200: Loss=2.6987, PPL=14.86, LR=2.08e-04

Step 1300: Loss=2.5490, PPL=12.79, LR=2.08e-04

Step 1400: Loss=2.7058, PPL=14.97, LR=2.08e-04

Step 1500: Loss=2.6709, PPL=14.45, LR=2.08e-04

Step 1600: Loss=2.7992, PPL=16.43, LR=2.08e-04

Step 1700: Loss=2.5985, PPL=13.44, LR=2.07e-04

Step 1800: Loss=2.5938, PPL=13.38, LR=2.07e-04

Step 1900: Loss=2.6442, PPL=14.07, LR=2.07e-04

Step 2000: Loss=2.7421, PPL=15.52, LR=2.07e-04

Step 2100: Loss=2.5942, PPL=13.39, LR=2.06e-04

Step 2200: Loss=2.6840, PPL=14.64, LR=2.06e-04

Step 2300: Loss=2.5749, PPL=13.13, LR=2.06e-04

Step 2400: Loss=2.6394, PPL=14.00, LR=2.06e-04

Step 2500: Loss=2.6828, PPL=14.63, LR=2.05e-04

Step 2600: Loss=2.6940, PPL=14.79, LR=2.05e-04

Step 2700: Loss=2.4676, PPL=11.79, LR=2.05e-04

Step 2800: Loss=2.6803, PPL=14.59, LR=2.05e-04

Step 2900: Loss=2.7306, PPL=15.34, LR=2.05e-04

Step 3000: Loss=2.7189, PPL=15.16, LR=2.04e-04

Step 3100: Loss=2.6787, PPL=14.57, LR=2.04e-04

Epoch 15 结果:
  训练损失: 2.6184, 困惑度: 13.71
  验证损失: 3.2915, 困惑度: 26.88
  验证BLEU: 0.0076 (0.76%)
检查点已保存: runs/no_pos_encoding/checkpoints/best_model.pt
  ✓ 保存最佳模型 (验证损失: 3.2915)
检查点已保存: runs/no_pos_encoding/checkpoints/checkpoint_epoch_15.pt
训练曲线已保存: runs/no_pos_encoding/figures/training_curves.png

==================================================
Epoch 16/50
==================================================

Step 0: Loss=2.4421, PPL=11.50, LR=2.04e-04

Step 100: Loss=2.2900, PPL=9.87, LR=2.04e-04

Step 200: Loss=2.2960, PPL=9.93, LR=2.04e-04

Step 300: Loss=2.5105, PPL=12.31, LR=2.03e-04

Step 400: Loss=2.4444, PPL=11.52, LR=2.03e-04

Step 500: Loss=2.4529, PPL=11.62, LR=2.03e-04

Step 600: Loss=2.5431, PPL=12.72, LR=2.03e-04

Step 700: Loss=2.6751, PPL=14.51, LR=2.03e-04

Step 800: Loss=2.4254, PPL=11.31, LR=2.02e-04

Step 900: Loss=2.5413, PPL=12.70, LR=2.02e-04

Step 1000: Loss=2.6616, PPL=14.32, LR=2.02e-04

Step 1100: Loss=2.5712, PPL=13.08, LR=2.02e-04

Step 1200: Loss=2.4860, PPL=12.01, LR=2.02e-04

Step 1300: Loss=2.6823, PPL=14.62, LR=2.01e-04

Step 1400: Loss=2.5436, PPL=12.73, LR=2.01e-04

Step 1500: Loss=2.7722, PPL=15.99, LR=2.01e-04

Step 1600: Loss=2.4946, PPL=12.12, LR=2.01e-04

Step 1700: Loss=2.7513, PPL=15.66, LR=2.01e-04

Step 1800: Loss=2.5742, PPL=13.12, LR=2.00e-04

Step 1900: Loss=2.5088, PPL=12.29, LR=2.00e-04

Step 2000: Loss=2.7070, PPL=14.98, LR=2.00e-04

Step 2100: Loss=2.6960, PPL=14.82, LR=2.00e-04

Step 2200: Loss=2.4361, PPL=11.43, LR=1.99e-04

Step 2300: Loss=2.8493, PPL=17.28, LR=1.99e-04

Step 2400: Loss=2.3718, PPL=10.72, LR=1.99e-04

Step 2500: Loss=2.4682, PPL=11.80, LR=1.99e-04

Step 2600: Loss=2.8431, PPL=17.17, LR=1.99e-04

Step 2700: Loss=2.5595, PPL=12.93, LR=1.98e-04

Step 2800: Loss=2.5928, PPL=13.37, LR=1.98e-04

Step 2900: Loss=2.8150, PPL=16.69, LR=1.98e-04

Step 3000: Loss=2.6878, PPL=14.70, LR=1.98e-04

Step 3100: Loss=2.7508, PPL=15.66, LR=1.98e-04

Epoch 16 结果:
  训练损失: 2.5725, 困惑度: 13.10
  验证损失: 3.3096, 困惑度: 27.37
  验证损失未改善 (patience: 1/5)
  当前: 3.3096, 最佳: 3.2915, 差距: 0.0181

==================================================
Epoch 17/50
==================================================

Step 0: Loss=2.6201, PPL=13.74, LR=1.98e-04

Step 100: Loss=2.3452, PPL=10.44, LR=1.97e-04

Step 200: Loss=2.4228, PPL=11.28, LR=1.97e-04

Step 300: Loss=2.2857, PPL=9.83, LR=1.97e-04

Step 400: Loss=2.5387, PPL=12.66, LR=1.97e-04

Step 500: Loss=2.5447, PPL=12.74, LR=1.97e-04

Step 600: Loss=2.3283, PPL=10.26, LR=1.96e-04

Step 700: Loss=2.5131, PPL=12.34, LR=1.96e-04

Step 800: Loss=2.4585, PPL=11.69, LR=1.96e-04

Step 900: Loss=2.5208, PPL=12.44, LR=1.96e-04

Step 1000: Loss=2.5809, PPL=13.21, LR=1.96e-04

Step 1100: Loss=2.6632, PPL=14.34, LR=1.96e-04

Step 1200: Loss=2.4288, PPL=11.35, LR=1.95e-04

Step 1300: Loss=2.3442, PPL=10.43, LR=1.95e-04

Step 1400: Loss=2.7596, PPL=15.79, LR=1.95e-04

Step 1500: Loss=2.6533, PPL=14.20, LR=1.95e-04

Step 1600: Loss=2.5635, PPL=12.98, LR=1.95e-04

Step 1700: Loss=2.5731, PPL=13.11, LR=1.94e-04

Step 1800: Loss=2.6558, PPL=14.24, LR=1.94e-04

Step 1900: Loss=2.6246, PPL=13.80, LR=1.94e-04

Step 2000: Loss=2.5773, PPL=13.16, LR=1.94e-04

Step 2100: Loss=2.6472, PPL=14.11, LR=1.94e-04

Step 2200: Loss=2.7153, PPL=15.11, LR=1.93e-04

Step 2300: Loss=2.7665, PPL=15.90, LR=1.93e-04

Step 2400: Loss=2.5521, PPL=12.83, LR=1.93e-04

Step 2500: Loss=2.6062, PPL=13.55, LR=1.93e-04

Step 2600: Loss=2.6803, PPL=14.59, LR=1.93e-04

Step 2700: Loss=2.6192, PPL=13.72, LR=1.93e-04

Step 2800: Loss=2.4925, PPL=12.09, LR=1.92e-04

Step 2900: Loss=2.5004, PPL=12.19, LR=1.92e-04

Step 3000: Loss=2.6993, PPL=14.87, LR=1.92e-04

Step 3100: Loss=2.6500, PPL=14.15, LR=1.92e-04

Epoch 17 结果:
  训练损失: 2.5313, 困惑度: 12.57
  验证损失: 3.3073, 困惑度: 27.31
  验证损失未改善 (patience: 2/5)
  当前: 3.3073, 最佳: 3.2915, 差距: 0.0159

==================================================
Epoch 18/50
==================================================

Step 0: Loss=2.2645, PPL=9.63, LR=1.92e-04

Step 100: Loss=2.3195, PPL=10.17, LR=1.92e-04

Step 200: Loss=2.3942, PPL=10.96, LR=1.91e-04

Step 300: Loss=2.5579, PPL=12.91, LR=1.91e-04

Step 400: Loss=2.4726, PPL=11.85, LR=1.91e-04

Step 500: Loss=2.5420, PPL=12.70, LR=1.91e-04

Step 600: Loss=2.1991, PPL=9.02, LR=1.91e-04

Step 700: Loss=2.6486, PPL=14.13, LR=1.90e-04

Step 800: Loss=2.5557, PPL=12.88, LR=1.90e-04

Step 900: Loss=2.4670, PPL=11.79, LR=1.90e-04

Step 1000: Loss=2.4112, PPL=11.15, LR=1.90e-04

Step 1100: Loss=2.2449, PPL=9.44, LR=1.90e-04

Step 1200: Loss=2.5704, PPL=13.07, LR=1.90e-04

Step 1300: Loss=2.5736, PPL=13.11, LR=1.89e-04

Step 1400: Loss=2.3697, PPL=10.69, LR=1.89e-04

Step 1500: Loss=2.4732, PPL=11.86, LR=1.89e-04

Step 1600: Loss=2.5934, PPL=13.38, LR=1.89e-04

Step 1700: Loss=2.3348, PPL=10.33, LR=1.89e-04

Step 1800: Loss=2.5675, PPL=13.03, LR=1.89e-04

Step 1900: Loss=2.3395, PPL=10.38, LR=1.88e-04

Step 2000: Loss=2.6034, PPL=13.51, LR=1.88e-04

Step 2100: Loss=2.6086, PPL=13.58, LR=1.88e-04

Step 2200: Loss=2.3758, PPL=10.76, LR=1.88e-04

Step 2300: Loss=2.6091, PPL=13.59, LR=1.88e-04

Step 2400: Loss=2.7679, PPL=15.93, LR=1.88e-04

Step 2500: Loss=2.5394, PPL=12.67, LR=1.87e-04

Step 2600: Loss=2.5622, PPL=12.96, LR=1.87e-04

Step 2700: Loss=2.4542, PPL=11.64, LR=1.87e-04

Step 2800: Loss=2.4571, PPL=11.67, LR=1.87e-04

Step 2900: Loss=2.4099, PPL=11.13, LR=1.87e-04

Step 3000: Loss=2.7285, PPL=15.31, LR=1.87e-04

Step 3100: Loss=2.5886, PPL=13.31, LR=1.86e-04

Epoch 18 结果:
  训练损失: 2.4934, 困惑度: 12.10
  验证损失: 3.3216, 困惑度: 27.70
  验证BLEU: 0.0099 (0.99%)
  验证损失未改善 (patience: 3/5)
  当前: 3.3216, 最佳: 3.2915, 差距: 0.0301
检查点已保存: runs/no_pos_encoding/checkpoints/best_model_bleu.pt
  ✓ 保存最佳BLEU模型 (BLEU: 0.0099)

==================================================
Epoch 19/50
==================================================

Step 0: Loss=2.3624, PPL=10.62, LR=1.86e-04

Step 100: Loss=2.3520, PPL=10.51, LR=1.86e-04

Step 200: Loss=2.4013, PPL=11.04, LR=1.86e-04

Step 300: Loss=2.4140, PPL=11.18, LR=1.86e-04

Step 400: Loss=2.4695, PPL=11.82, LR=1.86e-04

Step 500: Loss=2.3290, PPL=10.27, LR=1.86e-04

Step 600: Loss=2.3123, PPL=10.10, LR=1.85e-04

Step 700: Loss=2.3278, PPL=10.26, LR=1.85e-04

Step 800: Loss=2.3626, PPL=10.62, LR=1.85e-04

Step 900: Loss=2.5450, PPL=12.74, LR=1.85e-04

Step 1000: Loss=2.3305, PPL=10.28, LR=1.85e-04

Step 1100: Loss=2.4316, PPL=11.38, LR=1.85e-04

Step 1200: Loss=2.2670, PPL=9.65, LR=1.84e-04

Step 1300: Loss=2.2976, PPL=9.95, LR=1.84e-04

Step 1400: Loss=2.3143, PPL=10.12, LR=1.84e-04

Step 1500: Loss=2.5650, PPL=13.00, LR=1.84e-04

Step 1600: Loss=2.3475, PPL=10.46, LR=1.84e-04

Step 1700: Loss=2.5452, PPL=12.75, LR=1.84e-04

Step 1800: Loss=2.5376, PPL=12.65, LR=1.83e-04

Step 1900: Loss=2.4884, PPL=12.04, LR=1.83e-04

Step 2000: Loss=2.5105, PPL=12.31, LR=1.83e-04

Step 2100: Loss=2.5993, PPL=13.45, LR=1.83e-04

Step 2200: Loss=2.6729, PPL=14.48, LR=1.83e-04

Step 2300: Loss=2.5419, PPL=12.70, LR=1.83e-04

Step 2400: Loss=2.4088, PPL=11.12, LR=1.82e-04

Step 2500: Loss=2.6780, PPL=14.56, LR=1.82e-04

Step 2600: Loss=2.4304, PPL=11.36, LR=1.82e-04

Step 2700: Loss=2.6799, PPL=14.58, LR=1.82e-04

Step 2800: Loss=2.5859, PPL=13.28, LR=1.82e-04

Step 2900: Loss=2.5513, PPL=12.82, LR=1.82e-04

Step 3000: Loss=2.6136, PPL=13.65, LR=1.82e-04

Step 3100: Loss=2.5903, PPL=13.33, LR=1.81e-04

Epoch 19 结果:
  训练损失: 2.4573, 困惑度: 11.67
  验证损失: 3.3491, 困惑度: 28.48
  验证损失未改善 (patience: 4/5)
  当前: 3.3491, 最佳: 3.2915, 差距: 0.0576

==================================================
Epoch 20/50
==================================================

Step 0: Loss=2.1560, PPL=8.64, LR=1.81e-04

Step 100: Loss=2.3375, PPL=10.36, LR=1.81e-04

Step 200: Loss=2.3607, PPL=10.60, LR=1.81e-04

Step 300: Loss=2.3132, PPL=10.11, LR=1.81e-04

Step 400: Loss=2.0610, PPL=7.85, LR=1.81e-04

Step 500: Loss=2.5428, PPL=12.71, LR=1.81e-04

Step 600: Loss=2.4899, PPL=12.06, LR=1.80e-04

Step 700: Loss=2.4436, PPL=11.51, LR=1.80e-04

Step 800: Loss=2.3527, PPL=10.51, LR=1.80e-04

Step 900: Loss=2.4496, PPL=11.58, LR=1.80e-04

Step 1000: Loss=2.3429, PPL=10.41, LR=1.80e-04

Step 1100: Loss=2.3333, PPL=10.31, LR=1.80e-04

Step 1200: Loss=2.1819, PPL=8.86, LR=1.80e-04

Step 1300: Loss=2.4131, PPL=11.17, LR=1.79e-04

Step 1400: Loss=2.5042, PPL=12.23, LR=1.79e-04

Step 1500: Loss=2.3909, PPL=10.92, LR=1.79e-04

Step 1600: Loss=2.1783, PPL=8.83, LR=1.79e-04

Step 1700: Loss=2.4437, PPL=11.52, LR=1.79e-04

Step 1800: Loss=2.5469, PPL=12.77, LR=1.79e-04

Step 1900: Loss=2.3049, PPL=10.02, LR=1.79e-04

Step 2000: Loss=2.3761, PPL=10.76, LR=1.78e-04

Step 2100: Loss=2.4131, PPL=11.17, LR=1.78e-04

Step 2200: Loss=2.4580, PPL=11.68, LR=1.78e-04

Step 2300: Loss=2.4501, PPL=11.59, LR=1.78e-04

Step 2400: Loss=2.5189, PPL=12.42, LR=1.78e-04

Step 2500: Loss=2.8073, PPL=16.57, LR=1.78e-04

Step 2600: Loss=2.6856, PPL=14.67, LR=1.78e-04

Step 2700: Loss=2.5491, PPL=12.80, LR=1.77e-04

Step 2800: Loss=2.3840, PPL=10.85, LR=1.77e-04

Step 2900: Loss=2.6202, PPL=13.74, LR=1.77e-04

Step 3000: Loss=2.5684, PPL=13.05, LR=1.77e-04

Step 3100: Loss=2.2402, PPL=9.40, LR=1.77e-04

Epoch 20 结果:
  训练损失: 2.4232, 困惑度: 11.28
  验证损失: 3.3483, 困惑度: 28.45
  验证损失未改善 (patience: 5/5)
  当前: 3.3483, 最佳: 3.2915, 差距: 0.0568

==================================================
早停触发！验证损失在 5 个epoch内未改善
当前验证损失: 3.3483
最佳验证损失: 3.2915 (epoch 15)
最佳验证BLEU: 0.0099
==================================================
训练曲线已保存: runs/no_pos_encoding/figures/training_curves_final.png

============================================================
训练结束时间: 2025-11-09 06:15:01
============================================================
